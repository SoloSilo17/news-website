<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Portal de noticias en español con las últimas actualizaciones nacionales e internacionales">
    <meta name="keywords" content="noticias, deportes, cultura, internacional">
    <meta name="author" content="Noticias en Español">
    <title>Noticias en Español</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>Noticias en Español</h1>
        <p>El portal para las últimas noticias del mundo hispanohablante.</p>
    </header>

    <nav>
        <a href="#inicio" id="inicio-link">Inicio</a>
        <a href="#nacional" id="nacional-link">Nacional</a>
        <a href="#internacional" id="internacional-link">Internacional</a>
        <a href="#deportes" id="deportes-link">Deportes</a>
        <a href="#immigracion" id="immigracion-link">Immigracion</a>
    </nav>

    <main>
        <section id="inicio" class="section">
            <h2>Inicio</h2>
            <div id="inicio-articles"></div>
        </section>

        <section id="nacional" class="section" style="display: none;">
            <h2>Nacional</h2>
            <div id="nacional-articles"></div>
        </section>

        <section id="internacional" class="section" style="display: none;">
            <h2>Internacional</h2>
            <div id="internacional-articles"></div>
        </section>

        <section id="deportes" class="section" style="display: none;">
            <h2>Deportes</h2>
            <div id="deportes-articles"></div>
        </section>

        <section id="cultura" class="section" style="display: none;">
            <h2>Cultura</h2>
            <div id="cultura-articles"></div>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 Noticias en Español. Todos los derechos reservados.</p>
    </footer>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const sections = document.querySelectorAll(".section");
            const links = document.querySelectorAll("nav a");

            // Function to show the selected section
            const showSection = (sectionId) => {
                sections.forEach((section) => {
                    section.style.display = section.id === sectionId ? "block" : "none";
                });
            };

            // Attach click event listeners to navigation links
            links.forEach((link) => {
                link.addEventListener("click", (e) => {
                    e.preventDefault();
                    const targetSection = e.target.getAttribute("href").replace("#", "");
                    showSection(targetSection);

                    // Fetch articles for the selected section if not "Inicio"
                    if (targetSection !== "inicio") {
                        fetchArticlesByCategory(targetSection, `${targetSection}-articles`);
                    }
                });
            });

            // Load "Inicio" by default
            showSection("inicio");

            // Function to fetch articles by category
            const fetchArticlesByCategory = async (category, containerId) => {
                try {
                    const response = await fetch(`/api/articles/${category}`);
                    if (!response.ok) {
                        throw new Error(`HTTP error! Status: ${response.status}`);
                    }

                    const articles = await response.json();

                    // If the container for this category doesn't exist, create it
                    let container = document.getElementById(containerId);
                    if (!container) {
                        const newSection = document.createElement("section");
                        newSection.id = category;
                        newSection.classList.add("section");
                        newSection.innerHTML = `<h2>${category.charAt(0).toUpperCase() + category.slice(1)}</h2>
                            <div id="${containerId}"></div>`;
                        document.querySelector("main").appendChild(newSection);
                        container = document.getElementById(containerId);
                    }

                    container.innerHTML = ""; // Clear existing content
                    articles.forEach((article) => {
                        const articleElement = document.createElement("article");
                        articleElement.innerHTML = `
                            <h3>${article.title}</h3>
                            <img src="${article.image_url}" alt="${article.title}" style="max-width: 100%; height: auto;">
                            <p>${article.content}</p>
                        `;
                        container.appendChild(articleElement);
                    });
                } catch (error) {
                    console.error("Error fetching articles:", error);
                }
            };

            // Add navigation link dynamically
            const addNavigationLink = (category) => {
                const nav = document.querySelector("nav");
                const categoryLink = document.createElement("a");
                categoryLink.href = `#${category}`;
                categoryLink.id = `${category}-link`;
                categoryLink.textContent = category.charAt(0).toUpperCase() + category.slice(1);
                nav.appendChild(categoryLink);

                // Attach event listener for the new category
                categoryLink.addEventListener("click", (e) => {
                    e.preventDefault();
                    const targetSection = e.target.getAttribute("href").replace("#", "");
                    showSection(targetSection);
                    fetchArticlesByCategory(targetSection, `${targetSection}-articles`);
                });
            };
        });
    </script>

<script src="server.js"></script>


</body>
</html>
